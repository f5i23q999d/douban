<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.mapper.Mapper">

	
	
	<select id="getSeat" parameterType="publish" resultType="hall">
		select seat,id from hall where id=( select id from publish where movie=#{movie} and cinema=#{cinema} and hall=#{hall} and date=#{date} and time=#{time}  )
	</select>
	
	<insert id="setSeat" parameterType="hall" >
		insert into hall values(#{id},#{seat}) 
	</insert>
	
	<insert id="toOrder" parameterType="detail">
		insert into detail values(null,#{accountId},#{publishId},#{seat},#{phone},#{date},#{time})
	</insert>
	
	<select id="findPublish" parameterType="publish" resultType="publish">
		select * from publish where movie=#{movie} and cinema=#{cinema} and hall=#{hall} and date=#{date} and time=#{time}
	</select>
	
	<select id="getOrder" parameterType="string" resultType="detail">
		select * from detail where accountid=#{id}
	</select>
	
	<select id="getOrderDetail" parameterType="string" resultType="detail">
		select * from detail where id=#{id}
	</select>
	
	<select id="findPublishById" parameterType="int" resultType="publish">
		select * from publish where id=#{id}
	</select>
		
	<select id="IsUsed" parameterType="string" resultType="int">
		select count(*) from used where id=#{id}
	</select>
</mapper>